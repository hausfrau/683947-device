var body=document.querySelector("body"),VISUALLY_HIDDEN="visually-hidden",initSearch=function(){var e=document.querySelector(".search__form"),t=e.querySelector(".search__input"),r=e.querySelector(".search__button"),o=e.querySelector(".search__label"),l=function(){t.value||(o.classList.remove("search__label_border"),r.classList.add(VISUALLY_HIDDEN),r.blur())};t.addEventListener("input",function(){o.classList.add("search__label_border"),r.classList.remove(VISUALLY_HIDDEN)}),t.addEventListener("blur",l),e.addEventListener("submit",function(){t.value="",l()}),t.value="",l()},loadMainPage=function(){var e=document.querySelector(".services"),t=e.querySelectorAll(".services-button"),r=e.querySelectorAll(".services-description-item"),o=document.querySelector(".modal-write-us"),l=o.querySelector(".modal-close"),c=document.querySelector(".write-us"),a=document.querySelector(".map__link"),s=document.querySelector(".modal-map"),n=s.querySelector(".modal-close"),i=document.querySelector(".promo"),u=i.querySelectorAll(".promo-slider-item"),d=i.querySelectorAll(".promo-item"),m=document.querySelector(".write-us-form"),L=m.querySelector("#write-us-name"),v=m.querySelector("#write-us-email"),S=m.querySelector(".write-us-text"),f="",y="",_=!1,I=function(e,t){Array.prototype.forEach.call(e,function(e){e.classList.remove(t)})};c.addEventListener("click",function(e){e.preventDefault(),o.classList.remove(VISUALLY_HIDDEN),f?(L.value=f,y?(v.value=y,S.focus()):v.focus()):L.focus()});l.addEventListener("click",function(){o.classList.add(VISUALLY_HIDDEN)});a.addEventListener("click",function(e){e.preventDefault(),s.classList.remove(VISUALLY_HIDDEN)});n.addEventListener("click",function(){s.classList.add(VISUALLY_HIDDEN)});var q=function(e,t,r){for(var o=function(e,t){for(var r=0;r<e.length;r++)if(e[r].classList.contains(t))return r}(e,t),l=0;l<e.length;l++)l!=o?(e[l].classList.remove(t),r[l].classList.add(VISUALLY_HIDDEN)):r[l].classList.remove(VISUALLY_HIDDEN)},D=function(e,t,r){for(var o=0;o<e.length;o++)e[o].addEventListener("click",function(){this.classList.contains(t)||(I(e,t),this.classList.add(t),q(e,t,r))})};m.addEventListener("submit",function(e){L.value&&v.value&&S.value?_&&(localStorage.setItem("userName",L.value),localStorage.setItem("userEmail",v.value)):(e.preventDefault(),console.log("Нужно ввести имя и электронную почту"))}),initSearch(),D(u,"promo-slider-item_current",d),D(t,"services-item_current",r),"undefined"!=typeof Storage&&(_=!0,f=localStorage.getItem("userName"),y=localStorage.getItem("userEmail"))},loadInnerPage=function(){initSearch()};"main-page"==body.id?loadMainPage():loadInnerPage();
