var body=document.querySelector("body"),VISUALLY_HIDDEN="visually-hidden",initSearch=function(){var e=document.querySelector(".search__form"),t=e.querySelector(".search__input"),r=e.querySelector(".search__button"),s=e.querySelector(".search__label"),o=function(){t.value||(s.classList.remove("search__label_border"),r.classList.add(VISUALLY_HIDDEN),r.blur())};t.addEventListener("input",function(){s.classList.add("search__label_border"),r.classList.remove(VISUALLY_HIDDEN)}),t.addEventListener("blur",o),e.addEventListener("submit",function(){t.value="",o()}),t.value="",o()},loadMainPage=function(){var e=document.querySelector(".services"),t=e.querySelectorAll(".services-button"),r=e.querySelectorAll(".services-description-item"),s=document.querySelector(".modal-write-us"),o=s.querySelector(".modal-close"),a=document.querySelector(".write-us"),c=document.querySelector(".map__link"),l=document.querySelector(".modal-map"),i=l.querySelector(".modal-close"),n=document.querySelector(".promo"),u=n.querySelectorAll(".promo-slider-item"),d=n.querySelectorAll(".promo-item"),m=document.querySelector(".write-us-form"),L=m.querySelector("#write-us-name"),v=m.querySelector("#write-us-email"),S=m.querySelector("#write-us-text"),f="",y="",_=!1,I=function(e,t){Array.prototype.forEach.call(e,function(e){e.classList.remove(t)})};a.addEventListener("click",function(e){e.preventDefault(),s.classList.remove(VISUALLY_HIDDEN),s.classList.add("write-us-show"),f?(L.value=f,y?(v.value=y,S.focus()):v.focus()):L.focus()});o.addEventListener("click",function(){s.classList.add(VISUALLY_HIDDEN),s.classList.remove("write-us-show"),s.classList.remove("error")});c.addEventListener("click",function(e){e.preventDefault(),l.classList.remove(VISUALLY_HIDDEN),l.classList.add("map-show")});i.addEventListener("click",function(){l.classList.add(VISUALLY_HIDDEN),l.classList.remove("map-show")});var h=function(e,t,r){for(var s=function(e,t){for(var r=0;r<e.length;r++)if(e[r].classList.contains(t))return r}(e,t),o=0;o<e.length;o++)o!=s?(e[o].classList.remove(t),r[o].classList.add(VISUALLY_HIDDEN)):r[o].classList.remove(VISUALLY_HIDDEN)},q=function(e,t,r){for(var s=0;s<e.length;s++)e[s].addEventListener("click",function(){this.classList.contains(t)||(I(e,t),this.classList.add(t),h(e,t,r))})};m.addEventListener("submit",function(e){L.value&&v.value&&S.value?_&&(localStorage.setItem("userName",L.value),localStorage.setItem("userEmail",v.value)):(e.preventDefault(),s.classList.remove("error"),s.offsetWidth=s.offsetWidth,s.classList.add("error"))}),initSearch(),q(u,"promo-slider-item_current",d),q(t,"services-item_current",r),"undefined"!=typeof Storage&&(_=!0,f=localStorage.getItem("userName"),y=localStorage.getItem("userEmail"))},loadInnerPage=function(){initSearch()};"main-page"==body.id?loadMainPage():loadInnerPage();
